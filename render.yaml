services:
  - type: web
    name: donpaolo-api
    env: dotnet
    plan: free  # Change to 'starter' ($7/month) for production
    region: oregon  # Choose: oregon, frankfurt, singapore, mumbai
    buildCommand: cd Api && dotnet restore && dotnet publish -c Release -o ./publish
    startCommand: cd Api/publish && dotnet Api.dll --urls http://0.0.0.0:10000
    healthCheckPath: /api/Health
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: ASPNETCORE_URLS
        value: http://0.0.0.0:10000
      - key: ConnectionStrings__DefaultConnection
        fromDatabase:
          name: donpaolo-db
          property: connectionString
      - key: Jwt__Key
        sync: false  # Set this manually in Render dashboard
      - key: Jwt__Issuer
        value: https://donpaolo-api.onrender.com
      - key: Jwt__Audience
        sync: false  # Set this manually with your frontend URL
      - key: AllowedOrigins__0
        sync: false  # Set this manually with your frontend URL

databases:
  - name: donpaolo-db
    plan: free  # Change to 'starter' ($7/month) for production
    databaseName: donpaolo
    user: donpaolo_user

